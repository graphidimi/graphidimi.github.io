<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Untitled Document</title>
<style>
iframe{ visibility:hidden;}
</style>
<script src="processing-1.4.1.min.js"></script>
<script src="jquery-2.0.3.min.js"></script>
<script>
	function dessineTexte(){
		var pjs = Processing.getInstanceById('monCanvas');

		var prenoms = [ 'Frédérick', 'Christel', 'Yona', 'Jonas', 'Adriana', 'Lucie', 'Fatima'];

		var prenomAleatoire = prenoms[ Math.floor(Math.random()*prenoms.length) ];
		var monTexte = document.getElementById('inputTexte').value;
		pjs.draw(monTexte + prenomAleatoire);

		var maLangue = $('select').val();

		var monSpeech =

		//'http://translate.google.com/translate_tts?ie=UTF-8&q='+ monTexte + prenomAleatoire +
		//'&tl='+ maLangue +'&total=1&idx=0&textlen=5&prev=input';
		'http://translate.google.com/translate_tts?ie=UTF-8&total=1&idx=0&textlen=32&client=tw-ob&q='+ monTexte + ' ' + prenomAleatoire +		
		'&tl='+ maLangue +'';

		$('iframe').attr('src', monSpeech);

	}
</script>
</head>

<body>
	<canvas id="monCanvas" data-processing-sources="texte/texte.pde"></canvas>
    <br>
    <input id="inputTexte">
    <button onClick="dessineTexte();">Dessine mon texte !</button>
  	<select>
    	<option value="fr">Français</option>
        <option value="en">American</option>
        <option value="en-gb">British</option>
        <option value="es-mx">Mexicano</option>
    </select>
    <br>
    <iframe id="moniFrame"></iframe>
</body>
</html>
